2009-01-31 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/io-provider-desktop/nadp-desktop-file.c:
	* nautilus-actions/io-provider-desktop/nadp-desktop-file.h:
	* nautilus-actions/io-provider-desktop/nadp-read.c:
	* nautilus-actions/io-provider-desktop/nadp-utils.c:
	* nautilus-actions/io-provider-desktop/nadp-utils.h:
	* nautilus-actions/io-provider-gconf/nagp-read.c:
	Implements reading of .desktop files.

	* nautilus-actions/io-provider-gconf/nagp-write.c (write_item_action):
	Always writes the 'OBJECT_ITEM_TOOLBAR_LABEL_ENTRY' key.

2009-01-30 Pierre Wieser <pwieser@trychlos.org>

	No more record the toolbar_same_label indicator.

	* nautilus-actions.schemas.in:
	Remove schema for 'toolbar-same-label' key.

	* nautilus-actions/io-provider-gconf/nagp-read.c
	(read_item_action_properties):
	No more read the 'toolbar-same-label' entry.

	* nautilus-actions/io-provider-gconf/nagp-write.c (write_item_action):
	No more write the 'toolbar-same-label' entry.
	Remove the key if undeeded.

	* nautilus-actions/nact/nact-iaction-tab.c
	(on_toolbar_same_label_toggled): Fix toolbar label setup.

	* nautilus-actions/nact/nact-xml-reader.c (apply_values):
	No more read OBJECT_ITEM_TOOLBAR_SAME_LABEL_ENTRY node.

	* nautilus-actions/runtime/na-gconf-utils.c:
	* nautilus-actions/runtime/na-gconf-utils.h
	(na_gconf_utils_remove_entry): New function.

	* nautilus-actions/runtime/na-xml-writer.c
	(create_schema_entry, create_dump_entry):
	No more write the 'toolbar-same-label' entry.

	* nautilus-actions/nact/nact-iaction-tab.c
	(on_tab_updatable_selection_changed):
	Update tab label depending on the currently selected item.

	* nautilus-actions/nact/nautilus-actions-config-tool.ui:
	No more give a special name to Action tab label.

	* nautilus-actions/nact/nautilus-actions-config-tool.ui:
	Fix Action tab layout.

	A full rewriting of the writability of items vs. providers.

	* data/nautilus-actions.schemas.in:
	Describe 'export-format' and 'io-providers-order' keys.
	Define 'mandatory/all/locked' key to lock all configuration.

	* doc/io-provider-id: Reserve 'all' special provider_id.

	* nautilus-actions/api/na-gconf-monitor.c
	* nautilus-actions/io-provider-desktop/nadp-desktop-file.c
	* nautilus-actions/io-provider-desktop/nadp-desktop-provider.c
	* nautilus-actions/nact/base-application.c
	* nautilus-actions/nact/base-assistant.c
	* nautilus-actions/nact/base-builder.c
	* nautilus-actions/nact/base-dialog.c
	* nautilus-actions/nact/base-window.c
	* nautilus-actions/nact/nact-application.c
	* nautilus-actions/nact/nact-assistant-export-ask.c
	* nautilus-actions/nact/nact-assistant-export.c
	* nautilus-actions/nact/nact-assistant-import-ask.c
	* nautilus-actions/nact/nact-assistant-import.c
	* nautilus-actions/nact/nact-clipboard.c
	* nautilus-actions/nact/nact-confirm-logout.c
	* nautilus-actions/nact/nact-window.c
	* nautilus-actions/runtime/na-module.c
	(instance_init, instance_dispose):
	Review debug messages formatting.

	* nautilus-actions/api/na-iio-provider.c:
	* nautilus-actions/api/na-iio-provider.h
	(is_writable): Removed API.
	(is_able_to_write): New API.
	Review operations return codes.
	Add provider status.

	* nautilus-actions/io-provider-desktop/nadp-desktop-provider.c:
	* nautilus-actions/io-provider-desktop/nadp-desktop-provider.h:
	* nautilus-actions/io-provider-desktop/nadp-read.c:
	* nautilus-actions/io-provider-desktop/nadp-write.c:
	* nautilus-actions/io-provider-desktop/nadp-write.h:
	* nautilus-actions/io-provider-gconf/nagp-gconf-provider.c:
	* nautilus-actions/io-provider-gconf/nagp-write.c:
	* nautilus-actions/io-provider-gconf/nagp-write.h:
	Updated to new NAIIOProvider API.

	* nautilus-actions/nact/nact-iaction-tab.c:
	* nautilus-actions/nact/nact-iactions-list.c:
	* nautilus-actions/nact/nact-iactions-list.h:
	* nautilus-actions/nact/nact-iadvanced-tab.c:
	* nautilus-actions/nact/nact-ibackground-tab.c:
	* nautilus-actions/nact/nact-icommand-tab.c:
	* nautilus-actions/nact/nact-iconditions-tab.c:
	* nautilus-actions/nact/nact-main-menubar.c:
	* nautilus-actions/nact/nact-main-tab.h:
	* nautilus-actions/nact/nact-main-window.c:
	* nautilus-actions/nact/nact-providers-list.c:
	* nautilus-actions/nact/nact-tree-model-dnd.c:
	* nautilus-actions/nact/nact-tree-model.c:
	* nautilus-actions/nact/nact-window.c:
	* nautilus-actions/nact/nact-window.h:
	Take advantage of the new global item writability status.

	* nautilus-actions/nact/nact-main-statusbar.c:
	* nautilus-actions/nact/nact-main-statusbar.h
	(nact_main_statusbar_set_locked): Display the reason.

	* nautilus-actions/nact/nact-iactions-list-bis.c
	(nact_iactions_list_bis_list_modified_items):
	Dump the raw content of the list.

	* nautilus-actions/plugin/nautilus-actions.c (instance_init):
	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h(na_pivot_new):
	* nautilus-actions/utils/nautilus-actions-new.c (write_to_gconf):
	* nautilus-actions/utils/nautilus-actions-run.c (get_action):
	New na_pivot_new() signature.

	* nautilus-actions/private/na-object-item-fn.h:
	* nautilus-actions/private/na-object-item-priv.h:
	* nautilus-actions/private/na-object-item.c:
	The NAObjectItem now embeds a NAIOProvider pointer.

	* nautilus-actions/runtime/na-io-provider.c:
	* nautilus-actions/runtime/na-io-provider.h:
	Load all available and defined I/O providers.

	* nautilus-actions/test/init-dispose-diff.sh: New file.

2009-01-27 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-preferences.ui:
	Fix the name of the Down button.
	Invert buttons so that Up is at the top, and Down at the bottom.

	* nautilus-actions/nact/nact-providers-list.c:
	Activate up/down buttons.
	Save the I/O providers individual preferences.
	Load and save in order.

	* nautilus-actions/runtime/na-io-provider.c:
	Order the I/O providers in write priority.

2009-01-26 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/io-provider-gconf/nagp-read.c
	(nagp_iio_provider_read_items): Remove path trace.

	* nautilus-actions/nact/nact-application.c
	(appli_initialize_application):
	* nautilus-actions/plugin/nautilus-actions.c (instance_init):
	* nautilus-actions/utils/nautilus-actions-new.c (write_to_gconf):
	* nautilus-actions/utils/nautilus-actions-run.c (get_action):
	Adapt to new na_pivot_new().

	* nautilus-actions/nact/nact-iaction-tab.c (display_provider_name):
	Adapt to the temporary new NAIOProvider API.

	* nautilus-actions/nact/nact-preferences-editor.c:
	Fix compilation error by adding nact-providers-list.h include file.

	* nautilus-actions/nact/nact-providers-list.c:
	Display list of providers with their initial state.

	* nautilus-actions/plugin/nautilus-module.c:
	* nautilus-actions/tracker/na-tracker-plugin.c:
	(nautilus_module_initialize):
	Prefix the log message with "[N-A]".

	* nautilus-actions/runtime/na-gconf-utils.c:
	* nautilus-actions/runtime/na-gconf-utils.h
	(na_gconf_utils_get_subdirs, na_gconf_utils_free_subdirs):
	New functions.

	* nautilus-actions/runtime/na-io-provider.c:
	* nautilus-actions/runtime/na-io-provider.h:
	Refactoring to keep a static list of capable I/O providers.

	* nautilus-actions/runtime/na-module.c
	(na_module_load_modules): Only displays the name of the loaded module.
	(is_a_na_plugin): Add a trace with the full path of the module.

	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h:
	Define loadable_set and io_provider_set as construct-only properties.
	Remove unused action_changed_handler stuff.
	No more maintain the list of capable I/O providers.

2009-01-25 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h: Source reorganization.

	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h (na_pivot_get_automatic_reload):
	Remove unused function.

	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h (na_pivot_set_population):
	Function is renamed to na_pivot_set_loadable_population().
	The enum is named NAPivotLoadable.

	* nautilus-actions/plugin/nautilus-actions.c (instance_init):
	* nautilus-actions/utils/nautilus-actions-run.c (get_action):
	Adjusted accordingly.

	* nautilus-actions/runtime/na-module.c: Source slight adjustment.

2009-01-23 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-schemes-list.c: Cleanup the source file.

	* nautilus-actions/nact/nact-preferences.ui:
	Reset tooltips in all preference pages.

	* nautilus-actions/nact/nact-providers-list.c:
	* nautilus-actions/nact/nact-providers-list.h: New files.

	* nautilus-actions/nact/Makefile.am: Updated accordingly.

	* nautilus-actions/nact/nact-preferences-editor.c:
	Updated to handle a sixth tab.

2009-01-23 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Bump version number.

	* All source files: Updated copyright notice.

2009-01-23 Pierre Wieser <pwieser@trychlos.org>

	* NEWS: Updated for release.

	* po/POTFILES.in:
	Add nautilus-actions/nact/nact-preferences.ui file.

	* configure.ac:
	Add a dependancy on dbus-lib-1 for tracker.

	* nautilus-actions/nact/base-window.c (search_for_child_widget):
	Use GtkBuildable interface instead of 'name' field (fix #607704).

2009-01-20 Pierre Wieser <pwieser@trychlos.org>

	* data/nautilus-actions.schemas.in:
	Add a schema for 'na-desktop/locked' mandatory key.

	* .gitignore:
	Ignore eclipse-specific files.

	* data/nautilus-actions.schemas.in:
	Fix default value for level zero key.
	Describe the new 'schemes' preference key.

	* nautilus-actions/nact/nact-preferences.ui:
	* nautilus-actions/nact/nact-schemes-list.c:
	* nautilus-actions/nact/nact-schemes-list.h: New files.

	* nautilus-actions/nact/nact-iadvanced-tab.c:
	* nautilus-actions/nact/nact-preferences-editor.c:
	* nautilus-actions/nact/Makefile.am: Updated accordingly.

2009-01-17 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-assistant-export.ui:
	* nautilus-actions/nact/nautilus-actions-config-tool.ui:
	Forces default orientation of vboxes (fix #607218).

	* nautilus-actions/nact/nact-main-toolbar.c:
	* nautilus-actions/nact/nact-main-toolbar.h: New files.

	* nautilus-actions/nact/Makefile.am:
	* nautilus-actions/nact/nact-main-menubar.c: Updated accordingly.

2009-01-16 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-clipboard.c:
	Fix primary clipboard management.

	* nautilus-actions/nact/nact-main-menubar.c	(on_update_sensitivities):
	Fix cut/copy/duplicate/delete sensitivity when selection is	multiple.

2009-01-15 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-iactions-list-bis.c:
	* nautilus-actions/nact/nact-iactions-list.h
	(nact_iactions_list_bis_clear_selection): New function.

	* nautilus-actions/nact/nact-iactions-list.c (nact_iactions_list_fill):
	Clear the selection before filling the tree view.

	* nautilus-actions/nact/nact-main-menubar.c (on_update_sensitivities):
	Force the count of selected items to be consistant with the list.

	* nautilus-actions/nact/nact-tree-model-dnd.c (drop_inside):
	Dropped new item is set as new.

	* nautilus-actions/nact/nact-iactions-list.c (filter_selection):
	Review selection criteria, introducing implicit selection.

	* nautilus-actions/nact/nact-main-menubar.c (on_update_sensitivities):
	Review menu items sensitivity, especially when provider is not writable.
	Enable new item even when selection is multiple.

	* nautilus-actions/nact/nact-window.c:
	* nautilus-actions/nact/nact-window.h (nact_window_is_writable_item):
	New function.

2009-01-05 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Bump version number.

2009-01-05 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Add -Wformat=2 compilation option.

	* nautilus-actions/nact/nact-gtk-utils.c (nact_gtk_utils_set_editable):
	* nautilus-actions/nact/nact-iactions-list.c
	(nact_iactions_list_runtime_init_toplevel):
	* nautilus-actions/nact/nact-iadvanced-tab.c
	(runtime_init_connect_signals):
	* nautilus-actions/nact/nact-ibackground-tab.c
	(nact_ibackground_tab_runtime_init_toplevel):
	Substitute gtk_cell_layout_get_cells to obsoleted
	gtk_tree_view_column_get_cell_renderers.

	* nautilus-actions/runtime/na-xml-writer.c (na_xml_writer_output_xml):
	Use correct printf format.
