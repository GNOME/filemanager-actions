2011-01-19 Pierre Wieser <pwieser@trychlos.org>

	* tools/check-po.sh: Script rewriting.

	* NEWS: Update before release.

2011-01-16 Pierre Wieser <pwieser@trychlos.org>

	* run-distcheck.sh: New file.

	Add a script to check completeness of header files.

	* tools/.gitignore:
	* tools/Makefile.am:
	* tools/check-headers.sh: New files.

	* src/test/test-include.c:
	Renamed as tools/check-header.c and set it as ignored by git.

	* src/test/.gitignore:
	* src/test/Makefile.am: Updated accordingly.

	* Makefile.am:
	* configure.ac: configure in tools/.

2011-01-14 Pierre Wieser <pwieser@trychlos.org>

	* src/utils/nautilus-actions-new.c:
	* src/utils/nautilus-actions-run.c:
	* src/utils/nautilus-actions-schemas.c: Add locale.h include.

2011-01-12 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Enable silent rules by default.

2011-01-09 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/base-application.c (display_dlg): Setup parent window.

	* src/api/na-iimporter.h:
	* src/core/na-io-provider.c:
	* src/core/na-object-id.c:
	* src/core/na-object-item.c:
	* src/io-desktop/nadp-utils.c:
	* src/nact/nact-assistant-import.c:
	* src/nact/nact-iactions-list-bis.c:
	* src/nact/nact-iactions-list.h:
	* src/nact/nact-main-window.c:
	* src/nact/nact-preferences.ui:
	* src/nact/nact-tree-model.c: Remove all deprecated references to an UUID.

	* po/POTFILES.in: Add src/io-desktop/nadp-formats.c file.

	* src/core/na-object-profile-factory.c:
	Remove %o/%O parameters from description of version 2.0.
	Add a missing line feed.

	* tools/check-po.sh: Adapt to glade files.

2011-01-08 Pierre Wieser <pwieser@trychlos.org>

	* src/utils/nautilus-actions-new.c (init_options):
	* src/utils/nautilus-actions-run.c (init_options):
	* src/utils/nautilus-actions-schemas.c (init_options):
	Initialize translation domain for GOptionContext.

	* src/core/na-data-boxed.c
	(string_spec, slist_spec, bool_spec, pointer_spec, uint_spec):
	* src/core/na-export-format.c
	(na_export_format_get_label, na_export_format_get_description):
	* src/core/na-iabout.c (na_iabout_display):
	* src/core/na-object-action.c (na_object_action_new_with_defaults):
	* src/core/na-object-menu.c (na_object_menu_new_with_defaults):
	* src/io-xml/naxml-writer.c (write_data_schema_v1_element):
	* src/nact/nact-add-capability-dialog.c (on_base_runtime_init_dialog):
	* src/nact/nact-ienvironment-tab.c (nact_ienvironment_tab_runtime_init_toplevel):
	* src/nact/nact-iproperties-tab.c (on_tab_updatable_selection_changed):
	* src/nact/nact-main-menubar-file.c (nact_main_menubar_file_save_items):
	* src/nact/nact-match-list.c (get_must_match_header, insert_new_row):
	* src/nact/nact-tree-model-dnd.c
	(is_drop_possible, is_drop_possible_before_iter,
	is_drop_possible_into_dest, is_parent_accept_new_childs):
	Use gettext() to display localized static strings.

	* src/api/na-data-def.h: Complete the description of the fields.

	* src/core/na-io-provider.c:
	* src/core/na-object-profile-factory.c:
	* src/nact/nact-assistant-export.ui:
	* src/nact/nautilus-actions-config-tool.ui:
	Fix various mistakes and mispellings reported by Fr translation team.

	* configure.ac: Post-release bump version number.

2011-01-07 Pierre Wieser <pwieser@trychlos.org>

	* src/core/na-core-utils.c (na_core_utils_print_version):
	Print the compilation version of GLib2 and Gtk+ when in debug mode.

	* src/utils/Makefile.am:
	nautilus-actions-schemas is renamed as na-print-schemas,
	and is installed in PKGLIBEXECDIR.

2011-01-06 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/nact-main-window.c (iabout_get_toplevel):
	Let the About dialog get the toplevel window.

	* src/nact/nact-preferences.ui:
	* src/nact/nautilus-actions-config-tool.ui:
	Apply patch provided by Christian Kirbach. Fix #638548.

	Use the same script to migrate items and preferences.

	* README-GCONF: Document migrated and renamed preferences.

	* src/utils/nautilus-actions-gconf2desktop.sh.in:
	Rewrite migrated preferences as keyed files.
	At last, remove the whole Nautilus-Actions tree from GConf.

2011-01-05 Pierre Wieser <pwieser@trychlos.org>

	* src/utils/console-utils.c (console_cmdline_get_description):
	Returns the full address of the page to enter a new bug in Bugzilla.

	* src/core/na-gconf-migration.c:
	* src/core/na-gconf-migration.h (na_gconf_migration_run): New function.

	* src/core/Makefile.am: Updated accordingly.

	* src/nact/nact-main.c (main):
	* src/plugin-menu/nautilus-module.c (nautilus_module_initialize):
	* src/utils/nautilus-actions-new.c (main):
	* src/utils/nautilus-actions-run.c (main):
	Automatically run the migration tool at startup.

	* src/utils/nautilus-actions-gconf2desktop.sh.in:
	* src/utils/nautilus-actions-delete.c:
	* src/utils/nautilus-actions-print.c:
	New items migration script and programs.
	They take care of migrating users and mandatory items to .desktop files.

	* configure.ac:
	* src/utils/Makefile.am:
	* src/utils/.gitignore: Updated accordingly.

2011-01-04 Pierre Wieser <pwieser@trychlos.org>

	* src/core/na-tokens.c (na_tokens_new_from_selection):
	No more prepare the list string of selection.
	Directly build the selection list in the correct order.
	(execute_action_command): Setup the working directory.

	* src/core/na-tokens.c:
	* src/core/na-tokens.h (na_tokens_parse_parameters):
	Renamed as na_tokens_parse_for_display() as filenames are not quoted
	when displayed as part of an expanded label.

	* src/nact/nact-icommand-tab.c (parse_parameters):
	* src/plugin-menu/nautilus-actions.c (expand_tokens_item):
	Updated accordingly.

	* configure.ac: Fix "API Reference generation" message.

	* m4/na-enable-manuals.m4:
	Better specify that --enable-html-manuals (resp. pdf) are for user's manuals.

	* src/core/na-selected-info.c (new_from_uri):
	- Add an excerpt from RFC 2396 about valid characters in URIs.
	- Prefer the filename from g_filename_from_uri() when possible.

	* src/core/na-tokens.c
	(na_tokens_new_from_selection): Also g_shell_quote() the URI to preserve quotes.
	(build_string_lists_item): Removed function.

	* src/core/na-iabout.c (na_iabout_display):
	Fix typo in comment, adding a note to the translators.

2011-01-03 Pierre Wieser <pwieser@trychlos.org>

	* src/core/na-io-provider.c:
	* src/core/na-io-provider.h (na_io_provider_are_writings_authorized):
	New function.

	* configure.ac: Define a conditional if we have both GSettings and GConf.

	* src/core/na-gsettings-migrate.c:
	* src/core/na-gsettings-migrate.h: New files.

	* src/core/Makefile.am: Updated accordingly.

	* src/core/na-pivot.c (instance_constructed):
	Call na_gsettings_migrate() if we have both GSettings and GConf.

	* configure.ac:
	- Define HAVE_GSETTINGS variable.
	- Define HAVE_GCONF variable.

2011-01-02 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/egg-desktop-file.c:
	Get ride of tests for Gtk+ 2.12.0 as this is the minimal required version.

	* src/nact/base-keysyms.h:
	* src/nact/egg-sm-client-private.h:
	* src/nact/egg-sm-client-xsmp.c: 
	* src/nact/nact-add-capability-dialog.c:
	* src/nact/nact-add-scheme-dialog.c:
	* src/nact/nact-main-tab.c:
	* src/nact/nact-clipboard.c:
	* src/nact/nact-tree-model-dnd.c:
	* src/nact/nact-gtk-utils.c:
	* src/nact/nact-iaction-tab.c:
	* src/nact/nact-main-statusbar.c:
	* src/nact/nact-main-menubar.c:
	* src/nact/nact-schemes-list.c: Use GTK_CHECK_VERSION macro.

	* configure.ac:
	* m4/na-check-for-gtk.m4:
	Move back gtk_required variable to improve readibility of configure.ac.

2011-01-01 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Post release version bump.

	* NEWS: Update NEWS before release.

	* src/plugin-menu/nautilus-actions.c (create_root_menu):
	Update the root menu label to better reflect the product name.

	* src/nact/nautilus-actions-config-tool.ui:
	Use gtk-find instead of gtk-find-and-replace stock icon for browse buttons.

	* src/nact/nact-iaction-tab.c (nact_iaction_tab_initial_load_toplevel):
	Display again stock icons in NACT.
	Fix #638461 - Stock icons are no more displayed in NACT.

	* Almost all files modified:
	Update copyright message.
	Set Nautilus-Actions as being the actual official product name.

	* src/core/na-selected-info.c (new_from_nautilus_file_info):
	Fix pathname breakdown for 'x-nautilus-desktop:///' URI.
	Fix #638450 - Nautilus crashes when opening Trash or Network.
