2009-02-25 Pierre Wieser <pwieser@trychlos.org>

	Fix reference count errors in NACT user interface.

	* src/core/na-object-id.c (instance_dispose):
	Remove the disposing child from its parent childs list.

	* src/core/na-object-item-factory.c (free_items_list):
	* src/core/na-object-item.c (instance_dispose):
	* src/core/na-object.c (na_object_object_unref):
	Fix minor typo.

	* src/core/na-object-item.c (na_object_item_unref_items):
	Do not recursively unref objects here as this is done in dispose.

	* src/nact/nact-tree-model.c (nact_tree_model_dispose):
	Add a debug message.

	Make the menus exportable.

	* src/nact/nact-iactions-list.c:
	* src/nact/nact-tree-model-priv.h:
	* src/nact/nact-tree-model.c:
	* src/nact/nact-tree-model.h:
	Change the 'only_actions' semantic by a 'are_profiles_displayed' one.
	Profiles are actually stored, but not displayed.

	* src/nact/nact-iactions-list.c
	(nact_iactions_list_initial_load_toplevel):
	The title of the label column is no more localizable.

	Fix validity checks.

	* src/core/na-data-boxed.c
	(string_is_valid, locale_is_valid, slist_is_valid, pointer_is_valid,
	uint_is_valid): Fix individual validity checks of elementary data.

	* src/core/na-factory-object.c (na_factory_object_is_valid):
	First check for presence of mandatory data, then check present data.

	* src/core/na-iduplicable.c (na_iduplicable_duplicate):
	Also duplicate the status of the source object.

	* src/core/na-io-provider.c (na_io_provider_read_items):
	Add a comment.

	* src/core/na-object-item.c (na_object_item_copy):
	* src/core/na-object.c (na_object_object_check_status):
	Fix minor typo.

	* src/nact/nact-tree-model.c (nact_tree_model_fill):
	No more check status of newly duplicated objects.

	* src/nact/base-window.c (instance_dispose):
	Only set dispose after having tested for main window.

	* src/api/na-object-api.h:
	Distinguish between profile and item on get_label.

	* src/core/na-gtk-utils.c:
	* src/core/na-gtk-utils.h: New files.
	* src/core/Makefile.am: Updated accordingly.

	* src/core/na-data-boxed.c:
	* src/core/na-gconf-monitor.c:
	* src/core/na-importer-ask.c:
	* src/io-gconf/nagp-gconf-provider.c:
	* src/io-gconf/nagp-reader.c:
	* src/io-gconf/nagp-reader.h:
	Fix objects reading from GConf.

	* src/nact/nact-assistant-import.c:
	* src/nact/nact-iprefs.c:
	* src/nact/nact-preferences-editor.c:
	* src/nact/nact-tree-model-dnd.c:
	* src/utils/nautilus-actions-schemas.c:
	Move GConfClient to private object data, unref on dispose.

2009-02-24 Pierre Wieser <pwieser@trychlos.org>

	* src/api/na-iimporter.h:
	* src/core/Makefile.am:
	* src/core/na-iimporter.c:
	* src/core/na-importer-ask.c:
	* src/core/na-importer-ask.h:
	* src/core/na-iprefs.c:
	* src/core/na-iprefs.h:
	* src/io-xml/naxml-reader.c:
	* src/nact/Makefile.am:
	* src/nact/nact-assistant-import.c:
	* src/nact/nact-iprefs.c:
	* src/nact/nact-iprefs.h:
	* src/nact/nact-main-window.h:
	* src/nact/nact-preferences-editor.c:
	* src/nact/nact-tree-model-dnd.c:
	* src/nact/nautilus-actions-config-tool.ui:
	* src/test/test-reader.c: ImporterAsk dialog.

	* src/io-xml/naxml-keys.c:
	* src/io-xml/naxml-keys.h:
	* src/io-xml/naxml-reader.c: Able to import type 3 XML files.

	* exports/config_1af5a47e-96d9_v1.4.schemas:
	* src/api/na-data-boxed.h:
	* src/api/na-ifactory-object-data.h:
	* src/core/na-data-boxed.c:
	* src/core/na-factory-object.c:
	* src/core/na-object-action.c:
	* src/core/na-object-id-factory.c:
	* src/core/na-object-item-factory.c:
	* src/core/na-object-profile-factory.c:
	* src/io-xml/naxml-provider.c:
	* src/io-xml/naxml-reader.c:
	* src/io-xml/naxml-reader.h: Able to import two profiles.

	* src/api/na-data-boxed.h:
	* src/api/na-gconf-utils.h:
	* src/core/na-data-boxed.c:
	* src/core/na-factory-object.c:
	* src/core/na-gconf-utils.c:
	Make the dump more pretty.

	* exports/action-5c4fa203-b5d0_post_v1.11_type_3.xml:
	* exports/config-4c4fa203-b5d0_post_v1.11_type_2.schema:
	* exports/config_1af5a47e-96d9_v1.schemas:
	* exports/config_2af5a47e-96d9_pre_v1.11.schemas:
	* exports/config_3c4fa203-b5d0_post_v1.11_type_1.schemas:
	Refactor export files to better suit test-reader needs.

	* src/api/Makefile.am:
	* src/api/na-data-boxed.h:
	* src/api/na-data-types.h:
	* src/api/na-gconf-utils.h:
	* src/api/na-ifactory-object-data.h:
	* src/api/na-ifactory-object.h:
	* src/api/na-ifactory-provider.h:
	* src/api/na-iimporter.h:
	* src/api/na-object-api.h:
	* src/api/na-object-profile.h:
	* src/core/Makefile.am:
	* src/core/na-data-boxed.c:
	* src/core/na-factory-object.c:
	* src/core/na-factory-object.h:
	* src/core/na-factory-provider.c:
	* src/core/na-factory-provider.h:
	* src/core/na-gconf-utils.c:
	* src/core/na-ifactory-object.c:
	* src/core/na-ifactory-provider.c:
	* src/core/na-importer.c:
	* src/core/na-importer.h:
	* src/core/na-io-provider.c:
	* src/core/na-object-action-factory.c:
	* src/core/na-object-action.c:
	* src/core/na-object-id-factory.c:
	* src/core/na-object-item-factory.c:
	* src/core/na-object-menu-factory.c:
	* src/core/na-object-menu.c:
	* src/core/na-object-profile-factory.c:
	* src/core/na-object-profile.c:
	* src/io-desktop/nadp-desktop-file.c:
	* src/io-desktop/nadp-desktop-file.h:
	* src/io-desktop/nadp-desktop-provider.c:
	* src/io-desktop/nadp-keys.c:
	* src/io-desktop/nadp-keys.h:
	* src/io-desktop/nadp-reader.c:
	* src/io-gconf/nagp-gconf-provider.c:
	* src/io-xml/naxml-keys.h:
	* src/io-xml/naxml-provider.c:
	* src/io-xml/naxml-reader.c:
	* src/io-xml/naxml-reader.h:
	* src/nact/nact-assistant-import.c:
	* src/nact/nact-tree-model-dnd.c:
	* src/test/test-include.c:
	* src/test/test-reader.c: Able to import a pre-v2 action.

2009-02-22 Pierre Wieser <pwieser@trychlos.org>

	* src/api/Makefile.am:
	* src/api/na-ifactory-object-enum.h:
	* src/api/na-ifactory-object-str.h:
	* src/api/na-ifactory-object.h:
	* src/api/na-ifactory-provider.h:
	* src/api/na-iio-provider.h:
	* src/api/na-object-api.h:
	* src/core/Makefile.am:
	* src/core/na-data-element.c:
	* src/core/na-data-element.h:
	* src/core/na-factory-object.c:
	* src/core/na-factory-object.h:
	* src/core/na-ifactory-object.c:
	* src/core/na-ifactory-provider-priv.h:
	* src/core/na-ifactory-provider.c:
	* src/core/na-object-action-enum.c:
	* src/core/na-object-action.c:
	* src/core/na-object-id-enum.c:
	* src/core/na-object-item-enum.c:
	* src/core/na-object-item.c:
	* src/core/na-object-menu-enum.c:
	* src/core/na-object-menu.c:
	* src/core/na-object-profile-enum.c:
	* src/core/na-object-profile.c:
	* src/core/na-object.c:
	* src/io-desktop/nadp-desktop-provider.c:
	* src/io-desktop/nadp-desktop-provider.h:
	* src/io-desktop/nadp-keys.c:
	* src/io-desktop/nadp-keys.h:
	* src/io-desktop/nadp-reader.c:
	* src/io-desktop/nadp-writer.c:
	* src/io-xml/naxml-keys.h:
	* src/io-xml/naxml-reader.c:
	* src/test/test-include.c:
	Rename NAIDataFactory interface as NAIFactoryObject.

	* src/api/Makefile.am:
	* src/api/na-idata-factory-str.h:
	* src/api/na-idata-factory.h:
	* src/api/na-ifactory-provider-provider.h:
	* src/api/na-ifactory-provider.h:
	* src/api/na-iio-provider.h:
	* src/core/Makefile.am:
	* src/core/na-data-factory.c:
	* src/core/na-data-factory.h:
	* src/core/na-factory-provider.c:
	* src/core/na-factory-provider.h:
	* src/core/na-ifactory-provider-priv.h:
	* src/core/na-ifactory-provider.c:
	* src/core/na-object-action.c:
	* src/core/na-object-menu.c:
	* src/core/na-object-profile.c:
	* src/io-desktop/nadp-desktop-provider.c:
	* src/io-desktop/nadp-reader.c:
	* src/io-desktop/nadp-writer.c:
	* src/io-gconf/nagp-gconf-provider.c:
	* src/io-xml/naxml-provider.c:
	* src/io-xml/naxml-reader.c:
	Rename NAIIOFactory interface as NAIFactoryProvider.

	* src/core/na-io-provider.c:
	* src/core/na-pivot.c:
	* src/core/na-pivot.h:
	* src/nact/nact-application.c:
	* src/nact/nact-main-window.c:
	* src/plugin-menu/nautilus-actions.c:
	* src/utils/nautilus-actions-run.c
	(na_pivot_set_loadable): New function.
	(na_pivot_reload_items): Removed function.

2009-02-21 Pierre Wieser <pwieser@trychlos.org>

	* src/core/na-pivot.c:
	* src/core/na-pivot.h:
	* src/core/na-updater.c:
	* src/core/na-updater.h:
	* src/nact/nact-application.c:
	* src/nact/nact-main-window.c:
	* src/plugin-menu/nautilus-actions.c:
	* src/test/test-reader.c:
	* src/utils/nautilus-actions-new.c:
	* src/utils/nautilus-actions-run.c:
	No more define the loadable set at NAPivot construction time,
	but deffer this when actually loading items.

2009-02-20 Pierre Wieser <pwieser@trychlos.org>

	* po/POTFILES.in:
	* src/api/na-idata-factory-str.h:
	* src/api/na-idata-factory.h:
	* src/api/na-iimporter.h:
	* src/api/na-iio-factory.h:
	* src/api/na-object-api.h:
	* src/core/Makefile.am:
	* src/core/na-data-factory.c:
	* src/core/na-data-factory.h:
	* src/core/na-idata-factory.c:
	* src/core/na-iio-factory.c:
	* src/core/na-importer.c:
	* src/core/na-importer.h:
	* src/core/na-io-factory.c:
	* src/core/na-io-factory.h:
	* src/core/na-iprefs.h:
	* src/core/na-module.c:
	* src/core/na-object-action-enum.c:
	* src/core/na-object-action.c:
	* src/core/na-object-id-enum.c:
	* src/core/na-object-item-enum.c:
	* src/core/na-object-item.c:
	* src/core/na-object-menu-enum.c:
	* src/core/na-object-menu.c:
	* src/core/na-object-profile-enum.c:
	* src/core/na-object-profile.c:
	* src/core/na-pivot.c:
	* src/io-desktop/Makefile.am:
	* src/io-gconf/Makefile.am:
	* src/io-xml/Makefile.am:
	* src/io-xml/naxml-keys.c:
	* src/io-xml/naxml-keys.h:
	* src/io-xml/naxml-provider.c:
	* src/io-xml/naxml-provider.h:
	* src/io-xml/naxml-reader.c:
	* src/io-xml/naxml-reader.h:
	* src/nact/Makefile.am:
	* src/nact/nact-assistant-import.c:
	* src/nact/nact-import-ask.c:
	* src/nact/nact-iprefs.c:
	* src/nact/nact-preferences-editor.c:
	* src/nact/nact-tree-model-dnd.c:
	* src/plugin-menu/Makefile.am:
	* src/plugin-tracker/Makefile.am:
	* src/test/.gitignore:
	* src/test/Makefile.am:
	* src/utils/Makefile.am: Implement NAXMLReader.

2009-02-18 Pierre Wieser <pwieser@trychlos.org>

	* src/api/na-core-utils.h:
	* src/api/na-idata-factory-str.h:
	* src/core/na-core-utils.c:
	* src/core/na-data-element.c:
	* src/core/na-data-element.h:
	* src/core/na-data-factory.c:
	* src/core/na-io-provider.c:
	* src/core/na-io-provider.h:
	* src/core/na-object-action-enum.c:
	* src/core/na-object-id-enum.c:
	* src/core/na-object-item-enum.c:
	* src/core/na-object-item.c:
	* src/core/na-object-menu-enum.c:
	* src/core/na-object-profile-enum.c:
	* src/core/na-object.c:
	* src/io-desktop/nadp-writer.c:
	* src/io-gconf/nagp-reader.c:
	* src/nact/nact-assistant-export.c:
	* src/nact/nact-iactions-list-bis.c:
	* src/nact/nact-main-statusbar.c:
	* src/nact/nact-tree-model-dnd.c:
	* src/nact/nact-tree-model.c:
	Fix non empty string list.
	Fix under reference in export assistant.
	Refactor NADataElement class.

	* src/core/na-exporter.c (na_exporter_get_formats):
	Fix infinite loop.

	* src/core/na-iduplicable.c (na_iduplicable_dispose):
	Test for effective connexion before trying to disconnect.

	* src/core/na-data-element.c (na_data_element_set):
	Fix value->type inverted assertion.

	* src/api/na-core-utils.h:
	* src/core/na-core-utils.c:
	* src/io-desktop/nadp-desktop-file.c:
	* src/io-desktop/nadp-desktop-provider.c:
	* src/io-desktop/nadp-xdg-dirs.c:
	Fix reading of localized values in the desktop file.

	* src/nact/base-iprefs.c:
	* src/nact/base-iprefs.h:
	* src/nact/nact-assistant-import.c:
	* src/nact/nact-icommand-tab.c:
	* src/nact/nact-import-ask.c:
	* src/nact/nact-iprefs.c:
	* src/nact/nact-iprefs.h:
	* src/nact/nact-main-toolbar.c:
	* src/nact/nact-preferences-editor.c:
	Fix bad inheritance of interfaces.

	* src/api/na-object-api.h:
	* src/api/na-object.h:
	* src/core/na-data-factory.c:
	* src/core/na-io-provider.c:
	* src/core/na-object-action.c:
	* src/core/na-object-id.c:
	* src/core/na-object-menu.c:
	* src/core/na-object-profile.c:
	* src/core/na-object.c: Fix validity check of the items.

2009-02-17 Pierre Wieser <pwieser@trychlos.org>

	* po/POTFILES.in:
	* src/test/test-parse-uris.c:
	* src/nact/nact-preferences-editor.c:
	* src/nact/nact-main-statusbar.c:
	* src/nact/nact-iconditions-tab.c: Update list of translatable files.

	* src/api/na-core-utils.h:
	* src/api/na-idata-factory-str.h:
	* src/api/na-idata-factory.h:
	* src/api/na-iduplicable.h:
	* src/core/na-core-utils.c:
	* src/core/na-data-element.c:
	* src/core/na-data-element.h:
	* src/core/na-data-factory.c:
	* src/core/na-data-factory.h:
	* src/core/na-idata-factory.c:
	* src/core/na-iduplicable.c:
	* src/core/na-io-provider.c:
	* src/core/na-iprefs.c:
	* src/core/na-object-action-enum.c:
	* src/core/na-object-action.c:
	* src/core/na-object-id-enum.c:
	* src/core/na-object-item-enum.c:
	* src/core/na-object-menu.c:
	* src/core/na-object-profile-enum.c:
	* src/core/na-object-profile.c:
	* src/core/na-object.c:
	* src/io-desktop/nadp-desktop-provider.c:
	* src/io-gconf/nagp-reader.c: Add is_valid() functions.

	* src/utils/nautilus-actions-run.c: Restore production loadable set.

	* src/api/na-idata-factory.h:
	* src/api/na-iio-factory.h:
	* src/core/na-data-factory.c:
	* src/core/na-iio-factory.c:
	* src/core/na-object-action.c:
	* src/core/na-object-menu.c:
	* src/core/na-object-profile.c:
	* src/io-desktop/nadp-desktop-provider.c:
	* src/io-gconf/nagp-gconf-provider.c:
	* src/io-xml/naxml-provider.c:
	Add read_start() and write_start() to NAIIOFactory and 
	NAIDataFactory interfaces.

	* po/POTFILES.in: Update list of translatable files.

	* src/utils/console-utils.c:
	* src/utils/nautilus-actions-run.c: Update command-line utilities.

	* src/test/test-include.c:
	* src/test/test-parse-uris.c: Update test utilities.

	* src/plugin-tracker/na-tracker-dbus.c:
	* src/plugin-tracker/na-tracker.c: Update NATracker plugin.

	* src/core/Makefile.am:
	* src/core/na-updater.c:
	* src/core/na-updater.h:
	* src/nact/nact-window.c:
	* src/nact/nact-window.h: Update NactWindow class.

	* src/api/na-object-api.h:
	* src/api/na-object-item.h:
	* src/core/na-object-item.c:
	* src/nact/nact-tree-model-dnd.c:
	* src/nact/nact-tree-model.c: Update NactTreeModel class.

	* src/api/na-core-utils.h:
	* src/api/na-object-api.h:
	* src/api/na-object-profile.h:
	* src/core/na-core-utils.c:
	* src/core/na-object-profile.c:
	* src/io-gconf/nagp-reader.c:
	* src/nact/nact-ibackground-tab.c:
	* src/nact/nact-schemes-list.c: Update schemes list.

	* src/nact/nact-providers-list.c: Update providers list.

	* src/core/na-iprefs.c:
	* src/core/na-iprefs.h:
	* src/nact/nact-assistant-export.c:
	* src/nact/nact-export-ask.c:
	* src/nact/nact-export-format.c:
	* src/nact/nact-export-format.h:
	* src/nact/nact-preferences-editor.c:
	* src/nact/nact-preferences.ui: Update NactPreferencesEditor class.

	* src/nact/base-iprefs.c:
	* src/nact/base-iprefs.h:
	* src/nact/nact-main-window.c:
	* src/nact/nact-main-window.h: Update NactMainWindow class.

	* src/core/na-iprefs.c:
	* src/core/na-iprefs.h:
	* src/nact/nact-iprefs.c:
	* src/nact/nact-iprefs.h:
	* src/nact/nact-main-toolbar.c: Update toolbar.

	* src/api/na-iio-provider.h:
	* src/core/na-io-provider.c:
	* src/core/na-io-provider.h:
	* src/nact/nact-main-statusbar.c: Update status bar.

	* src/api/na-object-action.h:
	* src/api/na-object-api.h:
	* src/api/na-object-id.h:
	* src/api/na-object-item.h:
	* src/api/na-object-profile.h:
	* src/api/na-object.h:
	* src/core/na-object-action.c:
	* src/core/na-object-id.c:
	* src/core/na-object-item.c:
	* src/core/na-object-profile.c:
	* src/core/na-object.c:
	* src/core/na-pivot.c:
	* src/core/na-pivot.h:
	* src/core/na-updater.c:
	* src/core/na-updater.h:
	* src/nact/nact-export-format.c:
	* src/nact/nact-main-menubar.c: Update menu bar.

	* src/nact/nact-iprefs.c: Update NactIPrefs interface.

	* src/api/na-core-utils.h:
	* src/core/na-core-utils.c:
	* src/nact/nact-iconditions-tab.c:
	Update NactIConditionsTab interface.

	* src/api/na-core-utils.h:
	* src/core/na-core-utils.c:
	* src/core/na-iprefs.c:
	* src/core/na-iprefs.h:
	* src/nact/nact-icommand-tab.c:
	* src/nact/nact-iprefs.c:
	* src/nact/nact-iprefs.h: Update NactICommandTab interface.

	* src/api/na-object-api.h:
	* src/api/na-object-profile.h:
	* src/core/na-object-profile.c:
	* src/nact/nact-iaction-tab.c:
	* src/nact/nact-iadvanced-tab.c:
	* src/nact/nact-ibackground-tab.c: Update NactIBackgroundTab
	interface.

	* src/api/na-object-api.h:
	* src/api/na-object-item.h:
	* src/nact/nact-gtk-utils.c:
	* src/nact/nact-gtk-utils.h:
	* src/nact/nact-iaction-tab.c: Update NactIActionTab interface.

	* core/na-object-action-fn.h:
	* core/na-object-action-priv.h:
	* core/na-object-fn.h:
	* core/na-object-id-fn.h:
	* core/na-object-id-priv.h:
	* core/na-object-item-fn.h:
	* core/na-object-item-priv.h:
	* core/na-object-menu-fn.h:
	* core/na-object-menu-priv.h:
	* core/na-object-profile-fn.h:
	* core/na-object-profile-priv.h: Remove no more used files.

	* src/api/na-iduplicable.h:
	* src/api/na-object-api.h:
	* src/api/na-object-item.h:
	* src/api/na-object.h:
	* src/core/na-iduplicable.c:
	* src/core/na-object-item.c:
	* src/core/na-object.c:
	* src/nact/nact-iactions-list-bis.c:
	* src/nact/nact-iactions-list.c:
	* src/nact/nact-window.c:
	* src/nact/nact-window.h: Update NactIActionsList interface.

	* src/api/na-iduplicable.h:
	* src/api/na-object-api.h:
	* src/api/na-object-item.h:
	* src/core/na-exporter.c:
	* src/core/na-exporter.h:
	* src/core/na-iduplicable.c:
	* src/core/na-object-item.c:
	* src/nact/Makefile.am:
	* src/nact/nact-assistant-export.c:
	* src/nact/nact-clipboard.c:
	* src/nact/nact-clipboard.h:
	* src/nact/nact-confirm-logout.c:
	* src/nact/nact-export-ask.c:
	* src/nact/nact-export-format.c:
	* src/nact/nact-export-format.h:
	* src/nact/nact-iprefs.h:
	* src/nact/nact-main-menubar.h:
	* src/nact/nact-assistant-export.c:
	* src/nact/nact-assistant-export.h:
	* src/nact/nact-assistant-export.ui:
	* src/nact/nact-assistant-import.c:
	* src/nact/nact-import-ask.c:
	* src/nact/nact-import-ask.h:
	* src/nact/nact-iprefs.c:
	* src/nact/nact-iprefs.h:
	* src/nact/nact-tree-model.h: Update Nact classes.

	Refactor: move all XML code to src/io-xml plugin.

	* src/nact/Makefile.am:
	* src/nact/base-application-class.h:
	* src/nact/base-assistant.h:
	* src/nact/base-assistant.h:
	* src/nact/base-builder.h:
	* src/nact/base-dialog.h:
	* src/nact/base-iprefs.c:
	* src/nact/base-window-class.h:	Update typo in Base class headers.

	* src/core/na-importer.c:
	* src/core/na-importer.h: New files.

	* src/core/Makefile.am:
	* src/core/na-iimporter.c:
	* src/core/na-io-provider.c:
	* src/core/na-iprefs.h: Update core library.

	* src/nact/nact-export-format.h:
	* src/nact/nact-export-format.c:
	* src/core/na-exporter.h:
	* src/core/na-exporter.c: Update export treatements.

	* src/api/na-iexporter.h:
	* src/core/na-iexporter.c:
	* src/io-xml/naxml-module.c:
	* src/io-xml/naxml-provider.c: Update NAIExporter interface.

	Define NAExportFormat new class.

	* src/core/na-export-format.c:
	* src/core/na-export-format.h: New files.

	Rename src/nact/nact-assistant-export-ask.{c,h} to
	src/nact/nact-export-ask.{c,h}

2009-02-15 Pierre Wieser <pwieser@trychlos.org>

	Now install defined ids in docdir.

	* doc/export-format-id: New file.

	* doc/Makefile.am: Updated accordingly.

	Define NactIPrefs interface.

	* src/nact/nact-iprefs.c:
	* src/nact/nact-iprefs.h: New files.

	Update src/nact/
	Remove useless src/private directory.

	Define NAUpdater class.

	* src/core/na-updater.c:
	* src/core/na-updater.h: New files.

	Update src/core/na-pivot.{c,h}
	Update src/core/na-module.{c,h}
	Update src/core/na-iprefs.{c,h}
	Update src/core/na-ipivot-consumer.{c,h}
	Update src/core/na-io-factory.{c,h}
	Update src/core/na-io-provider.{c,h}
	Update src/core/na-iabout.{c,h}
	Update src/utils.

2009-02-15 Deji Akingunola <dakingun@gmail.com>

	* src/test/Makefile.am: Fix typo.

2009-02-15 Pierre Wieser <pwieser@trychlos.org>

	Update src/test.
	Update src/plugin-tracker.
	Update src/plugin-menu.

	Define NAIImporter interface.

	* src/api/na-iimporter.h:
	* src/core/na-iimporter.c: New files.

	Define NAIExporter interface.

	* src/api/na-iexporter.h:
	* src/core/na-iexporter.c: New files.

	* src/core/na-dbus-tracker.h: New file.

	Remove useless src/api/na-gconf-keys.h
	Update GConf I/O provider.
	Create src/io-gconf/nagp-keys.c
	Rename src/io-gconf/nagp-write.{c,h} to src/io-gconf/nagp-writer.{c,h}
	Rename src/io-gconf/nagp-read.{c,h} to src/io-gconf/nagp-reader.{c,h}

	Update I/O desktop provider.

	* src/io-desktop/nadp-keys.c:
	* src/io-desktop/nadp-keys.h: New files.

	Rename src/io-desktop/nadp-xdg-data-dirs.{c,h} to src/io-desktop/nadp-xdg-dirs.{c,h}
	Rename src/io-desktop/nadp-write.{c,h} to src/io-desktop/nadp-writer.{c,h}
	Rename src/io-desktop/nadp-read.{c,h} to src/io-desktop/nadp-reader.{c,h}

	NAObject-derived classes implement NAIDataFactory interface.

	* src/core/na-object-id-enum.c:
	* src/core/na-object-item-enum.c:
	* src/core/na-object-action-enum.c:
	* src/core/na-object-profile-enum.c:
	* src/core/na-object-menu-enum.c: New files.

	Define NADataElement class.

	* src/core/na-data-element.c:
	* src/core/na-data-element.h: New files.

	Define NAIDataFactory interface.

	* src/api/na-idata-factory.h:
	* src/api/na-idata-factory-enum.h:
	* src/api/na-idata-factory-str.h:
	* src/core/na-idata-factory.c:
	* src/core/na-data-factory.c:
	* src/core/na-data-factory.h: New files.

	Define NAIIOFactory interface.

	* src/api/na-iio-factory.h:
	* src/api/na-iio-factory-factory.h:
	* src/core/na-iio-factory.c:
	* src/core/na-io-factory.c:
	* src/core/na-io-factory.h: New files.

	Rename src/core/na-object-menu-class.h to src/api/na-object-menu.h
	Rename src/core/na-object-profile-class.h to src/api/na-object-profile.h
	Rename src/core/na-object-action-class.h to src/api/na-object-action.h
	Rename src/core/na-object-item-class.h to src/api/na-object-item.h
	Rename src/core/na-object-id-class.h to src/api/na-object-id.h
	Rename src/core/na-object-class.h to src/api/na-object.h
	Rename src/core/na-iduplicable.h to src/api/na-iduplicable.h
	Rename src/core/na-gconf-utils.h to src/api/na-gconf-utils.h
	Rename src/api/na-iio-provider.c to src/core/na-iio-provider.c

	* src/api/na-dbus.h: Update defined name.

	* m4/na-log-domains.m4: Update log domains with new subdirs.

	* doc/io-provider-id: Reference na-xml XML provider.

	Rename src/api/na-gconf-monitor.c to src/core/na-gconf-monitor.c
	Rename src/core/na-utils.h to src/api/na-core-utils.h
	Rename src/core/na-utils.c to src/core/na-core-utils.c

	* src/api/Makefile.am:
	* src/core/Makefile.am: Updated accordingly.

	* src/core/na-core-utils.c:
	* src/core/na-core-utils.h: Normalize functions names.

	Merge src/private/ and src/runtime to src/core/
	Rename src/api/na-api.h to src/api/na-extension.h

	* src/api/README:
	* src/io-desktop/nadp-module.c:
	* src/io-gconf/nagp-module.c:
	* src/runtime/na-module.c: Updated accordingly.

	Define XML provider as a dynamic module.
	
	* io-xml/Makefile.am:
	* io-xml/naxml-module.c:
	* io-xml/naxml-provider.c:
	* io-xml/naxml-provider.h: New files.

	Rename source tree from nautilus-actions/ to src/
	Rename src/io-provider-desktop/ to src/io-desktop/
	Rename src/io-provider-gconf/ to src/io-gconf/
	Rename src/plugin to src/plugin-menu/
	Rename src/tracker to src/plugin-tracker/

	* Makefile.am:
	* configure.ac:
	* po/POTFILES.in: Updated accordingly.

2009-01-31 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/io-provider-desktop/nadp-desktop-file.c:
	* nautilus-actions/io-provider-desktop/nadp-desktop-file.h:
	* nautilus-actions/io-provider-desktop/nadp-read.c:
	* nautilus-actions/io-provider-desktop/nadp-utils.c:
	* nautilus-actions/io-provider-desktop/nadp-utils.h:
	* nautilus-actions/io-provider-gconf/nagp-read.c:
	Implements reading of .desktop files.

	* nautilus-actions/io-provider-gconf/nagp-write.c (write_item_action):
	Always writes the 'OBJECT_ITEM_TOOLBAR_LABEL_ENTRY' key.

2009-01-30 Pierre Wieser <pwieser@trychlos.org>

	No more record the toolbar_same_label indicator.

	* nautilus-actions.schemas.in:
	Remove schema for 'toolbar-same-label' key.

	* nautilus-actions/io-provider-gconf/nagp-read.c
	(read_item_action_properties):
	No more read the 'toolbar-same-label' entry.

	* nautilus-actions/io-provider-gconf/nagp-write.c (write_item_action):
	No more write the 'toolbar-same-label' entry.
	Remove the key if undeeded.

	* nautilus-actions/nact/nact-iaction-tab.c
	(on_toolbar_same_label_toggled): Fix toolbar label setup.

	* nautilus-actions/nact/nact-xml-reader.c (apply_values):
	No more read OBJECT_ITEM_TOOLBAR_SAME_LABEL_ENTRY node.

	* nautilus-actions/runtime/na-gconf-utils.c:
	* nautilus-actions/runtime/na-gconf-utils.h
	(na_gconf_utils_remove_entry): New function.

	* nautilus-actions/runtime/na-xml-writer.c
	(create_schema_entry, create_dump_entry):
	No more write the 'toolbar-same-label' entry.

	* nautilus-actions/nact/nact-iaction-tab.c
	(on_tab_updatable_selection_changed):
	Update tab label depending on the currently selected item.

	* nautilus-actions/nact/nautilus-actions-config-tool.ui:
	No more give a special name to Action tab label.

	* nautilus-actions/nact/nautilus-actions-config-tool.ui:
	Fix Action tab layout.

	A full rewriting of the writability of items vs. providers.

	* data/nautilus-actions.schemas.in:
	Describe 'export-format' and 'io-providers-order' keys.
	Define 'mandatory/all/locked' key to lock all configuration.

	* doc/io-provider-id: Reserve 'all' special provider_id.

	* nautilus-actions/api/na-gconf-monitor.c
	* nautilus-actions/io-provider-desktop/nadp-desktop-file.c
	* nautilus-actions/io-provider-desktop/nadp-desktop-provider.c
	* nautilus-actions/nact/base-application.c
	* nautilus-actions/nact/base-assistant.c
	* nautilus-actions/nact/base-builder.c
	* nautilus-actions/nact/base-dialog.c
	* nautilus-actions/nact/base-window.c
	* nautilus-actions/nact/nact-application.c
	* nautilus-actions/nact/nact-assistant-export-ask.c
	* nautilus-actions/nact/nact-assistant-export.c
	* nautilus-actions/nact/nact-assistant-import-ask.c
	* nautilus-actions/nact/nact-assistant-import.c
	* nautilus-actions/nact/nact-clipboard.c
	* nautilus-actions/nact/nact-confirm-logout.c
	* nautilus-actions/nact/nact-window.c
	* nautilus-actions/runtime/na-module.c
	(instance_init, instance_dispose):
	Review debug messages formatting.

	* nautilus-actions/api/na-iio-provider.c:
	* nautilus-actions/api/na-iio-provider.h
	(is_writable): Removed API.
	(is_able_to_write): New API.
	Review operations return codes.
	Add provider status.

	* nautilus-actions/io-provider-desktop/nadp-desktop-provider.c:
	* nautilus-actions/io-provider-desktop/nadp-desktop-provider.h:
	* nautilus-actions/io-provider-desktop/nadp-read.c:
	* nautilus-actions/io-provider-desktop/nadp-write.c:
	* nautilus-actions/io-provider-desktop/nadp-write.h:
	* nautilus-actions/io-provider-gconf/nagp-gconf-provider.c:
	* nautilus-actions/io-provider-gconf/nagp-write.c:
	* nautilus-actions/io-provider-gconf/nagp-write.h:
	Updated to new NAIIOProvider API.

	* nautilus-actions/nact/nact-iaction-tab.c:
	* nautilus-actions/nact/nact-iactions-list.c:
	* nautilus-actions/nact/nact-iactions-list.h:
	* nautilus-actions/nact/nact-iadvanced-tab.c:
	* nautilus-actions/nact/nact-ibackground-tab.c:
	* nautilus-actions/nact/nact-icommand-tab.c:
	* nautilus-actions/nact/nact-iconditions-tab.c:
	* nautilus-actions/nact/nact-main-menubar.c:
	* nautilus-actions/nact/nact-main-tab.h:
	* nautilus-actions/nact/nact-main-window.c:
	* nautilus-actions/nact/nact-providers-list.c:
	* nautilus-actions/nact/nact-tree-model-dnd.c:
	* nautilus-actions/nact/nact-tree-model.c:
	* nautilus-actions/nact/nact-window.c:
	* nautilus-actions/nact/nact-window.h:
	Take advantage of the new global item writability status.

	* nautilus-actions/nact/nact-main-statusbar.c:
	* nautilus-actions/nact/nact-main-statusbar.h
	(nact_main_statusbar_set_locked): Display the reason.

	* nautilus-actions/nact/nact-iactions-list-bis.c
	(nact_iactions_list_bis_list_modified_items):
	Dump the raw content of the list.

	* nautilus-actions/plugin/nautilus-actions.c (instance_init):
	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h(na_pivot_new):
	* nautilus-actions/utils/nautilus-actions-new.c (write_to_gconf):
	* nautilus-actions/utils/nautilus-actions-run.c (get_action):
	New na_pivot_new() signature.

	* nautilus-actions/private/na-object-item-fn.h:
	* nautilus-actions/private/na-object-item-priv.h:
	* nautilus-actions/private/na-object-item.c:
	The NAObjectItem now embeds a NAIOProvider pointer.

	* nautilus-actions/runtime/na-io-provider.c:
	* nautilus-actions/runtime/na-io-provider.h:
	Load all available and defined I/O providers.

	* nautilus-actions/test/init-dispose-diff.sh: New file.

2009-01-27 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-preferences.ui:
	Fix the name of the Down button.
	Invert buttons so that Up is at the top, and Down at the bottom.

	* nautilus-actions/nact/nact-providers-list.c:
	Activate up/down buttons.
	Save the I/O providers individual preferences.
	Load and save in order.

	* nautilus-actions/runtime/na-io-provider.c:
	Order the I/O providers in write priority.

2009-01-26 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/io-provider-gconf/nagp-read.c
	(nagp_iio_provider_read_items): Remove path trace.

	* nautilus-actions/nact/nact-application.c
	(appli_initialize_application):
	* nautilus-actions/plugin/nautilus-actions.c (instance_init):
	* nautilus-actions/utils/nautilus-actions-new.c (write_to_gconf):
	* nautilus-actions/utils/nautilus-actions-run.c (get_action):
	Adapt to new na_pivot_new().

	* nautilus-actions/nact/nact-iaction-tab.c (display_provider_name):
	Adapt to the temporary new NAIOProvider API.

	* nautilus-actions/nact/nact-preferences-editor.c:
	Fix compilation error by adding nact-providers-list.h include file.

	* nautilus-actions/nact/nact-providers-list.c:
	Display list of providers with their initial state.

	* nautilus-actions/plugin/nautilus-module.c:
	* nautilus-actions/tracker/na-tracker-plugin.c:
	(nautilus_module_initialize):
	Prefix the log message with "[N-A]".

	* nautilus-actions/runtime/na-gconf-utils.c:
	* nautilus-actions/runtime/na-gconf-utils.h
	(na_gconf_utils_get_subdirs, na_gconf_utils_free_subdirs):
	New functions.

	* nautilus-actions/runtime/na-io-provider.c:
	* nautilus-actions/runtime/na-io-provider.h:
	Refactoring to keep a static list of capable I/O providers.

	* nautilus-actions/runtime/na-module.c
	(na_module_load_modules): Only displays the name of the loaded module.
	(is_a_na_plugin): Add a trace with the full path of the module.

	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h:
	Define loadable_set and io_provider_set as construct-only properties.
	Remove unused action_changed_handler stuff.
	No more maintain the list of capable I/O providers.

2009-01-25 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h: Source reorganization.

	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h (na_pivot_get_automatic_reload):
	Remove unused function.

	* nautilus-actions/runtime/na-pivot.c:
	* nautilus-actions/runtime/na-pivot.h (na_pivot_set_population):
	Function is renamed to na_pivot_set_loadable_population().
	The enum is named NAPivotLoadable.

	* nautilus-actions/plugin/nautilus-actions.c (instance_init):
	* nautilus-actions/utils/nautilus-actions-run.c (get_action):
	Adjusted accordingly.

	* nautilus-actions/runtime/na-module.c: Source slight adjustment.

2009-01-23 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-schemes-list.c: Cleanup the source file.

	* nautilus-actions/nact/nact-preferences.ui:
	Reset tooltips in all preference pages.

	* nautilus-actions/nact/nact-providers-list.c:
	* nautilus-actions/nact/nact-providers-list.h: New files.

	* nautilus-actions/nact/Makefile.am: Updated accordingly.

	* nautilus-actions/nact/nact-preferences-editor.c:
	Updated to handle a sixth tab.

2009-01-23 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Bump version number.

	* All source files: Updated copyright notice.

2009-01-23 Pierre Wieser <pwieser@trychlos.org>

	* NEWS: Updated for release.

	* po/POTFILES.in:
	Add nautilus-actions/nact/nact-preferences.ui file.

	* configure.ac:
	Add a dependancy on dbus-lib-1 for tracker.

	* nautilus-actions/nact/base-window.c (search_for_child_widget):
	Use GtkBuildable interface instead of 'name' field (fix #607704).

2009-01-20 Pierre Wieser <pwieser@trychlos.org>

	* data/nautilus-actions.schemas.in:
	Add a schema for 'na-desktop/locked' mandatory key.

	* .gitignore:
	Ignore eclipse-specific files.

	* data/nautilus-actions.schemas.in:
	Fix default value for level zero key.
	Describe the new 'schemes' preference key.

	* nautilus-actions/nact/nact-preferences.ui:
	* nautilus-actions/nact/nact-schemes-list.c:
	* nautilus-actions/nact/nact-schemes-list.h: New files.

	* nautilus-actions/nact/nact-iadvanced-tab.c:
	* nautilus-actions/nact/nact-preferences-editor.c:
	* nautilus-actions/nact/Makefile.am: Updated accordingly.

2009-01-17 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-assistant-export.ui:
	* nautilus-actions/nact/nautilus-actions-config-tool.ui:
	Forces default orientation of vboxes (fix #607218).

	* nautilus-actions/nact/nact-main-toolbar.c:
	* nautilus-actions/nact/nact-main-toolbar.h: New files.

	* nautilus-actions/nact/Makefile.am:
	* nautilus-actions/nact/nact-main-menubar.c: Updated accordingly.

2009-01-16 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-clipboard.c:
	Fix primary clipboard management.

	* nautilus-actions/nact/nact-main-menubar.c	(on_update_sensitivities):
	Fix cut/copy/duplicate/delete sensitivity when selection is	multiple.

2009-01-15 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions/nact/nact-iactions-list-bis.c:
	* nautilus-actions/nact/nact-iactions-list.h
	(nact_iactions_list_bis_clear_selection): New function.

	* nautilus-actions/nact/nact-iactions-list.c (nact_iactions_list_fill):
	Clear the selection before filling the tree view.

	* nautilus-actions/nact/nact-main-menubar.c (on_update_sensitivities):
	Force the count of selected items to be consistant with the list.

	* nautilus-actions/nact/nact-tree-model-dnd.c (drop_inside):
	Dropped new item is set as new.

	* nautilus-actions/nact/nact-iactions-list.c (filter_selection):
	Review selection criteria, introducing implicit selection.

	* nautilus-actions/nact/nact-main-menubar.c (on_update_sensitivities):
	Review menu items sensitivity, especially when provider is not writable.
	Enable new item even when selection is multiple.

	* nautilus-actions/nact/nact-window.c:
	* nautilus-actions/nact/nact-window.h (nact_window_is_writable_item):
	New function.

2009-01-05 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Bump version number.

2009-01-05 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Add -Wformat=2 compilation option.

	* nautilus-actions/nact/nact-gtk-utils.c (nact_gtk_utils_set_editable):
	* nautilus-actions/nact/nact-iactions-list.c
	(nact_iactions_list_runtime_init_toplevel):
	* nautilus-actions/nact/nact-iadvanced-tab.c
	(runtime_init_connect_signals):
	* nautilus-actions/nact/nact-ibackground-tab.c
	(nact_ibackground_tab_runtime_init_toplevel):
	Substitute gtk_cell_layout_get_cells to obsoleted
	gtk_tree_view_column_get_cell_renderers.

	* nautilus-actions/runtime/na-xml-writer.c (na_xml_writer_output_xml):
	Use correct printf format.
